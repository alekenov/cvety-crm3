# –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤—Å–µ—Ö API endpoints cvety.kz

**–û–±–Ω–æ–≤–ª–µ–Ω–æ**: 2025-09-04  
**–ò—Å—Ç–æ—á–Ω–∏–∫–∏**: Production API + Local Development APIs

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ API

### 1. Production API (https://cvety.kz)
- **–ë–∞–∑–æ–≤—ã–π URL**: `https://cvety.kz/api/v2/`
- **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**: `?access_token=ABE7142D-D8AB-76AF-8D6C-2C4FAEA9B144`
- **–§–æ—Ä–º–∞—Ç**: REST API —Å JSON –æ—Ç–≤–µ—Ç–∞–º–∏

### 2. Local Development APIs
- **PHP API**: `/Users/alekenov/cvety-local/public/api/v2/`
- **Python API**: `localhost:8001` (FastAPI —Å Supabase)
- **Proxy**: Vite dev server –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–µ endpoints

---

## üì¶ –ü–†–û–î–£–ö–¢–´ (Products) - Production ‚úÖ

### GET /api/v2/products
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç  
**–û–ø–∏—Å–∞–Ω–∏–µ**: –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤

```bash
curl "https://cvety.kz/api/v2/products?type=vitrina&limit=10&access_token=TOKEN"
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
- `type`: `vitrina` | `catalog`
- `isAvailable`: boolean
- `limit`: number (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 20, max 100)
- `offset`: number (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0)

### GET /api/v2/products/detail
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç  
**–û–ø–∏—Å–∞–Ω–∏–µ**: –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ–≤–∞—Ä–µ

```bash
curl "https://cvety.kz/api/v2/products/detail?id=696885&access_token=TOKEN"
```

### POST /api/v2/product/create
**–°—Ç–∞—Ç—É—Å**: ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏  
**–û–ø–∏—Å–∞–Ω–∏–µ**: –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ç–æ–≤–∞—Ä–∞

```bash
curl -X POST "https://cvety.kz/api/v2/product/create?access_token=TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"id":"SKU-123","title":"–ù–æ–≤—ã–π –±—É–∫–µ—Ç","price":25000,"ownerId":17008}'
```

### POST /api/v2/product/update-status
**–°—Ç–∞—Ç—É—Å**: ‚ùå 405 Method Not Allowed  
**–û–ø–∏—Å–∞–Ω–∏–µ**: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —Ç–æ–≤–∞—Ä–∞

### POST /api/v2/product/properties
**–°—Ç–∞—Ç—É—Å**: ‚ùå 405 Method Not Allowed  
**–û–ø–∏—Å–∞–Ω–∏–µ**: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤ —Ç–æ–≤–∞—Ä–∞ (—Ä–∞–∑–º–µ—Ä—ã)

### POST /api/v2/product/price
**–°—Ç–∞—Ç—É—Å**: ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏  
**–û–ø–∏—Å–∞–Ω–∏–µ**: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω—ã —Ç–æ–≤–∞—Ä–∞

### DELETE /api/v2/products/delete
**–°—Ç–∞—Ç—É—Å**: ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏  
**–û–ø–∏—Å–∞–Ω–∏–µ**: –£–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞

---

## üìã –ó–ê–ö–ê–ó–´ (Orders) - Production ‚úÖ

### GET /api/v2/orders
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç  
**–û–ø–∏—Å–∞–Ω–∏–µ**: –°–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤

```bash
curl "https://cvety.kz/api/v2/orders?status=accepted&limit=10&access_token=TOKEN"
```

### GET /api/v2/orders/detail
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç  
**–û–ø–∏—Å–∞–Ω–∏–µ**: –î–µ—Ç–∞–ª–∏ –∑–∞–∫–∞–∑–∞

```bash
curl "https://cvety.kz/api/v2/orders/detail?id=122578&access_token=TOKEN"
```

### GET /api/v2/order/allowed-statuses
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç  
**–û–ø–∏—Å–∞–Ω–∏–µ**: –†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã –¥–ª—è –∑–∞–∫–∞–∑–∞

```bash
curl "https://cvety.kz/api/v2/order/allowed-statuses?id=122578&access_token=TOKEN"
```

**–°—Ç–∞—Ç—É—Å—ã**:
- `N` - New (–Ω–æ–≤—ã–π)
- `PD` - Paid (–æ–ø–ª–∞—á–µ–Ω) 
- `AP` - Accepted (–ø—Ä–∏–Ω—è—Ç)
- `CO` - Completed (—Å–æ–±—Ä–∞–Ω)
- `DE` - Delivery (–≤ –¥–æ—Å—Ç–∞–≤–∫–µ)
- `F` - Finished (–∑–∞–≤–µ—Ä—à–µ–Ω)

### POST /api/v2/order/change-status
**–°—Ç–∞—Ç—É—Å**: ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏  
**–û–ø–∏—Å–∞–Ω–∏–µ**: –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞

```bash
curl -X POST "https://cvety.kz/api/v2/order/change-status?access_token=TOKEN" \
  --data "id=122578&statusId=AP&comment=–ü—Ä–∏–Ω—è—Ç–æ"
```

### DELETE /api/v2/orders/delete
**–°—Ç–∞—Ç—É—Å**: ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏  
**–û–ø–∏—Å–∞–Ω–∏–µ**: –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞

---

## üè™ –ú–ê–ì–ê–ó–ò–ù–´ (Shops) - Production ‚úÖ

### GET /api/v2/shop/list
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç  
**–û–ø–∏—Å–∞–Ω–∏–µ**: –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –º–∞–≥–∞–∑–∏–Ω–æ–≤

```bash
curl "https://cvety.kz/api/v2/shop/list?access_token=TOKEN"
```

**–û—Ç–≤–µ—Ç**:
```json
{
  "success": true,
  "data": [
    {
      "id": 17008,
      "xml_id": "cvetykz",
      "name": "Cvety.kz",
      "city": "2"
    }
  ]
}
```

---

## üë• –ö–õ–ò–ï–ù–¢–´ (Customers) - Production ‚úÖ

### GET /api/v2/customers/
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç  
**–û–ø–∏—Å–∞–Ω–∏–µ**: –°–ø–∏—Å–æ–∫ –∫–ª–∏–µ–Ω—Ç–æ–≤ —Å –±–∞–∑–æ–≤–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π

```bash
curl "https://cvety.kz/api/v2/customers/?access_token=TOKEN"
```

### GET /api/v2/customers/orders.php
**–°—Ç–∞—Ç—É—Å**: ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç CUSTOMER_ID  
**–û–ø–∏—Å–∞–Ω–∏–µ**: –ó–∞–∫–∞–∑—ã –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞

```bash
curl "https://cvety.kz/api/v2/customers/orders.php?CUSTOMER_ID=171690&access_token=TOKEN"
```

### GET /api/v2/customers/with-stats/
**–°—Ç–∞—Ç—É—Å**: ‚ùå 500 Internal Server Error  
**–ü—Ä–æ–±–ª–µ–º–∞**: –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Ñ–∞–π–ª index.php

---

## üì§ –ó–ê–ì–†–£–ó–ö–ò (Uploads) - Production ‚ö†Ô∏è

### POST /api/v2/uploads/images
**–û–ø–∏—Å–∞–Ω–∏–µ**: –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π  
**–§–æ—Ä–º–∞—Ç**: multipart/form-data

```bash
curl -X POST "https://cvety.kz/api/v2/uploads/images?access_token=TOKEN" \
  -F "file=@/path/to/image.jpg"
```

### POST /api/v2/uploads/videos
**–û–ø–∏—Å–∞–Ω–∏–µ**: –ó–∞–≥—Ä—É–∑–∫–∞ –≤–∏–¥–µ–æ  
**–§–æ—Ä–º–∞—Ç**: multipart/form-data

---

## üë§ –ü–†–û–§–ò–õ–¨ (Profile) - Local PHP API ‚úÖ

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `/Users/alekenov/cvety-local/public/api/v2/profile/`  
**–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä**: `ProfileController.php`

### GET /api/v2/profile
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ  
**–û–ø–∏—Å–∞–Ω–∏–µ**: –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è —Ñ–ª–æ—Ä–∏—Å—Ç–∞

**–û—Ç–≤–µ—Ç**:
```json
{
  "success": true,
  "data": {
    "id": 1,
    "name": "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä",
    "phone": "+7 (777) 000-00-01",
    "position": "owner",
    "bio": "–í–ª–∞–¥–µ–ª–µ—Ü —Ü–≤–µ—Ç–æ—á–Ω–æ–≥–æ –º–∞–≥–∞–∑–∏–Ω–∞",
    "avatar": null,
    "can_edit": true,
    "positions": ["owner", "senior", "florist", "assistant"]
  }
}
```

### PUT /api/v2/profile
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ  
**–û–ø–∏—Å–∞–Ω–∏–µ**: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è

```json
{
  "name": "–ù–æ–≤–æ–µ –∏–º—è",
  "phone": "+7 (777) 123-45-67",
  "position": "senior",
  "bio": "–û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –±–∏–æ–≥—Ä–∞—Ñ–∏—è"
}
```

**–í–∞–ª–∏–¥–∞—Ü–∏—è**:
- `name`: string, 2-255 —Å–∏–º–≤–æ–ª–æ–≤
- `phone`: —Ç–µ–ª–µ—Ñ–æ–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç
- `position`: enum (owner, senior, florist, assistant)
- `bio`: string, –º–∞–∫—Å–∏–º—É–º 1000 —Å–∏–º–≤–æ–ª–æ–≤

---

## üè¢ –ò–ù–§–û–†–ú–ê–¶–ò–Ø –û –ú–ê–ì–ê–ó–ò–ù–ï (Shop Info) - Local PHP API ‚úÖ

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `/Users/alekenov/cvety-local/public/api/v2/shop-info/`

### GET /api/v2/shop-info
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ  
**–û–ø–∏—Å–∞–Ω–∏–µ**: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–∞–≥–∞–∑–∏–Ω–µ

**–û—Ç–≤–µ—Ç**:
```json
{
  "success": true,
  "data": {
    "id": 1,
    "name": "–¶–≤–µ—Ç—ã.kz",
    "address": "–≥. –ê–ª–º–∞—Ç—ã, —É–ª. –ê–±–∞—è 150/230",
    "phone": "+7 (727) 378-88-88",
    "working_hours": "–ü–Ω-–í—Å: 9:00-21:00",
    "city": "–ê–ª–º–∞—Ç—ã",
    "social_media": {
      "instagram": "https://instagram.com/cvety.kz",
      "whatsapp": "+77273788888",
      "telegram": null
    }
  }
}
```

### PUT /api/v2/shop-info
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ  
**–û–ø–∏—Å–∞–Ω–∏–µ**: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –º–∞–≥–∞–∑–∏–Ω–µ

---

## üë®‚Äçüíº –°–û–¢–†–£–î–ù–ò–ö–ò (Colleagues) - Local PHP API ‚úÖ

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `/Users/alekenov/cvety-local/public/api/v2/colleagues/`

### GET /api/v2/colleagues
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ  
**–û–ø–∏—Å–∞–Ω–∏–µ**: –°–ø–∏—Å–æ–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
- `isActive`: boolean - —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ
- `position`: string - —Ñ–∏–ª—å—Ç—Ä –ø–æ –¥–æ–ª–∂–Ω–æ—Å—Ç–∏
- `limit`: number (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 200)
- `offset`: number (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0)

### POST /api/v2/colleagues
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ  
**–û–ø–∏—Å–∞–Ω–∏–µ**: –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞

```json
{
  "name": "John Doe",
  "phone": "+7 (777) 123-45-67",
  "position": "florist",
  "isActive": true
}
```

### PUT /api/v2/colleagues/{id}
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ  
**–û–ø–∏—Å–∞–Ω–∏–µ**: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞

### PATCH /api/v2/colleagues/{id}/toggle
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ  
**–û–ø–∏—Å–∞–Ω–∏–µ**: –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

### DELETE /api/v2/colleagues/{id}
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ  
**–û–ø–∏—Å–∞–Ω–∏–µ**: –£–¥–∞–ª–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞

---

## üì¶ –ò–ù–í–ï–ù–¢–ê–†–¨ (Inventory) - Local Python API ‚úÖ

**–ë–∞–∑–æ–≤—ã–π URL**: `localhost:8001` (FastAPI)  
**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: Supabase

### üå∏ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ü–≤–µ—Ç–∞–º–∏

#### GET /crm/inventory
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ  
**–û–ø–∏—Å–∞–Ω–∏–µ**: –°—Ç—Ä–∞–Ω–∏—Ü–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ–º —Ü–≤–µ—Ç–æ–≤

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
- `search`: string - –ø–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
- `page`: number - –Ω–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã

#### POST /api/inventory/update
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ  
**–û–ø–∏—Å–∞–Ω–∏–µ**: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –æ–¥–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞

```json
{
  "product_id": "123",
  "quantity": 10,
  "note": "–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–∫–ª–∞–¥–∞"
}
```

#### POST /api/inventory/bulk-update
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ  
**–û–ø–∏—Å–∞–Ω–∏–µ**: –ú–∞—Å—Å–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞

```json
{
  "updates": [
    {"product_id": "123", "quantity": 15},
    {"product_id": "124", "quantity": 8}
  ]
}
```

#### GET /api/inventory/low-stock
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ  
**–û–ø–∏—Å–∞–Ω–∏–µ**: –¢–æ–≤–∞—Ä—ã —Å –Ω–∏–∑–∫–∏–º –æ—Å—Ç–∞—Ç–∫–æ–º

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
- `threshold`: number (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 5) - –ø–æ—Ä–æ–≥ –Ω–∏–∑–∫–æ–≥–æ –æ—Å—Ç–∞—Ç–∫–∞

#### POST /api/inventory/delivery
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ  
**–û–ø–∏—Å–∞–Ω–∏–µ**: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Å—Ç–∞–≤–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤

```json
{
  "flower_id": "rose-red",
  "quantity": 50,
  "supplier": "–ü–æ—Å—Ç–∞–≤—â–∏–∫ —Ä–æ–∑",
  "price": 150,
  "note": "–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–∞—è –ø–æ—Å—Ç–∞–≤–∫–∞"
}
```

#### POST /api/inventory/writeoff
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ  
**–û–ø–∏—Å–∞–Ω–∏–µ**: –°–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ —Å–æ —Å–∫–ª–∞–¥–∞

```json
{
  "flower_id": "rose-red",
  "quantity": 5,
  "reason": "–£–≤—è–¥—à–∏–µ —Ü–≤–µ—Ç—ã",
  "note": "–ù–µ –ø—Ä–æ–¥–∞–Ω—ã –≤ —Å—Ä–æ–∫"
}
```

#### GET /api/inventory/history
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ  
**–û–ø–∏—Å–∞–Ω–∏–µ**: –ò—Å—Ç–æ—Ä–∏—è –¥–≤–∏–∂–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
- `flower_id`: string (optional) - –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ü–≤–µ—Ç–æ–∫
- `limit`: number (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 50)

**–û—Ç–≤–µ—Ç**:
```json
{
  "success": true,
  "data": [
    {
      "id": "mov_123",
      "flower_id": "rose-red",
      "flower_name": "–†–æ–∑–∞ –∫—Ä–∞—Å–Ω–∞—è",
      "movement_type": "delivery",
      "quantity": 50,
      "reason": "–ü–æ—Å—Ç–∞–≤–∫–∞ –æ—Ç –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞",
      "created_at": "2025-09-04T10:00:00Z"
    }
  ]
}
```

### üå∫ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ü–≤–µ—Ç–∞–º–∏ (Flowers API)

#### GET /api/flowers/search
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ  
**–û–ø–∏—Å–∞–Ω–∏–µ**: –ü–æ–∏—Å–∫ —Ü–≤–µ—Ç–æ–≤ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é

#### POST /api/flowers/delivery
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ  
**–û–ø–∏—Å–∞–Ω–∏–µ**: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Å—Ç–∞–≤–∫–∏ —Ü–≤–µ—Ç–æ–≤

```json
{
  "flower_id": "rose-red",
  "quantity": 100,
  "supplier": "–¶–≤–µ—Ç–æ—á–Ω–∞—è –±–∞–∑–∞",
  "price": 120,
  "delivery_date": "2025-09-04"
}
```

#### POST /api/flowers/writeoff
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ  
**–û–ø–∏—Å–∞–Ω–∏–µ**: –°–ø–∏—Å–∞–Ω–∏–µ —Ü–≤–µ—Ç–æ–≤

```json
{
  "flower_id": "rose-red",
  "quantity": 10,
  "reason": "–ù–µ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ",
  "note": "–ü–æ–≤—Ä–µ–∂–¥–µ–Ω—ã –ø—Ä–∏ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∫–µ"
}
```

---

## üîÑ –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø –ò –°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–Ø

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ–º

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏/–æ—Ç–º–µ–Ω–µ –∑–∞–∫–∞–∑–æ–≤ —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

1. **–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–∫–∞–∑–∞** (`validate_and_update_inventory("reserve")`):
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ —Ç–æ–≤–∞—Ä–æ–≤
   - –†–µ–∑–µ—Ä–≤–∏—Ä—É–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤ —Å–∫–ª–∞–¥–µ
   - –°–ø–∏—Å—ã–≤–∞–µ—Ç —Ü–≤–µ—Ç—ã –ø–æ —Å–æ—Å—Ç–∞–≤—É –±—É–∫–µ—Ç–æ–≤
   - –°–æ–∑–¥–∞–µ—Ç –∑–∞–ø–∏—Å–∏ –≤ `flower_inventory_movements`

2. **–ü—Ä–∏ –æ—Ç–º–µ–Ω–µ –∑–∞–∫–∞–∑–∞** (`validate_and_update_inventory("release")`):
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–≤–∞—Ä—ã –Ω–∞ —Å–∫–ª–∞–¥
   - –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ü–≤–µ—Ç—ã –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ
   - –°–æ–∑–¥–∞–µ—Ç –∫–æ–º–ø–µ–Ω—Å–∏—Ä—É—é—â–∏–µ –∑–∞–ø–∏—Å–∏ –¥–≤–∏–∂–µ–Ω–∏—è

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

**–¢–∞–±–ª–∏—Ü—ã Supabase**:
- `flowers` - —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Ü–≤–µ—Ç–æ–≤
- `flower_inventory_movements` - –¥–≤–∏–∂–µ–Ω–∏—è —Ü–≤–µ—Ç–æ–≤
- `products` - –ø—Ä–æ–¥—É–∫—Ü–∏—è (–±—É–∫–µ—Ç—ã)
- `inventory_movements` - –¥–≤–∏–∂–µ–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ü–∏–∏
- `orders` / `order_items` - –∑–∞–∫–∞–∑—ã
- `florist_profiles` - –ø—Ä–æ—Ñ–∏–ª–∏ —Ñ–ª–æ—Ä–∏—Å—Ç–æ–≤
- `shop_info` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–∞–≥–∞–∑–∏–Ω–µ
- `colleagues` - —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏

---

## üéØ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ü–û –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ

### Production endpoints (cvety.kz):
- ‚úÖ –ü—Ä–æ–¥—É–∫—Ç—ã: –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∏–µ –¥–ª—è —á—Ç–µ–Ω–∏—è
- ‚úÖ –ó–∞–∫–∞–∑—ã: –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∏–µ
- ‚úÖ –ú–∞–≥–∞–∑–∏–Ω—ã: —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ –ö–ª–∏–µ–Ω—Ç—ã: –±–∞–∑–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚ö†Ô∏è POST endpoints: —Ç—Ä–µ–±—É—é—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è 405 –æ—à–∏–±–æ–∫

### Local development endpoints:
- ‚úÖ Profile API (PHP): –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
- ‚úÖ Shop Info API (PHP): –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é  
- ‚úÖ Colleagues API (PHP): –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
- ‚úÖ Inventory API (Python): –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∫–ª–∞–¥–æ–º

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:

1. **Vite proxy** –≤ `vite.config.ts`:
```javascript
proxy: {
  '^/api/v2/(profile|shop-info|colleagues)': {
    target: 'http://localhost:8001',  // Python API
    changeOrigin: true
  },
  '^/api/*': {
    target: 'https://cvety.kz',  // Production API
    changeOrigin: true
  }
}
```

2. **Python API –∑–∞–ø—É—Å–∫**: `uvicorn app:app --host 0.0.0.0 --port 8001`

3. **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ**: SSH tunnel –∫ production Supabase —á–µ—Ä–µ–∑ `185.125.90.141`

–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –¥–ª—è –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–≥–æ CRM —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ —Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏, –∑–∞–∫–∞–∑–∞–º–∏, –∫–ª–∏–µ–Ω—Ç–∞–º–∏, –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ–º –∏ –ø–µ—Ä—Å–æ–Ω–∞–ª–æ–º.